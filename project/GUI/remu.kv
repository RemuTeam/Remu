ScreenManager:
    SwitchLayout:
    MasterGUILayout:
    SlaveGUILayout:
    PresentationLayout:

<SwitchLayout>:
    name: "switch_layout"
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: "Choose master or slave"

        BoxLayout:
            orientation: 'horizontal'
            Button:
                text: "Master"
                on_press: app.set_master()
                on_press: app.add_slave("127.0.0.1")
                on_release: app.root.current = 'master_gui_layout'
            Button:
                text: "Slave"
                on_press: app.set_slave()
                on_release: app.root.current = 'slave_gui_layout'


<MasterGUILayout>:
    name: "master_gui_layout"
    messages_sent: msg_sent_amount
    orientation: 'vertical'
    spacing: 10
    padding: 10

    BoxLayout:
        orientation: 'vertical'
        Label:
            text: "Olet master-näkymässä"
            font_size: 32
        Label:
            text: "Viestejä lähetetty: "
        Label:
            id: msg_sent_amount
            text: "0"
        Button:
            text: "Lähetä viesti slavelle"
            on_press: app.send_msg("127.0.0.1", "Mooooi!")
            on_press: msg_sent_amount.text = root.increment()


<SlaveGUILayout>:
    name: "slave_gui_layout"
    orientation: 'vertical'
    spacing: 10
    padding: 10

    BoxLayout:
        orientation: 'vertical'
        Label:
            text: "Olet slave-näkymässä"
            cls: 'hidable'
            font_size: 32
        Image:
            id: picture
            source: None
        Button:
            text: "Simuloi master-signaalia"
            on_press: root.button_pressed()


<PresentationLayout>:
    name: "presentation_layout"

    BoxLayout:
        Image:
            id: picture
            source: None
         Button:
            text: "Simuloi master-signaalia"
            on_press: root.button_pressed()